# 1. Base Image: Use an official Node.js image.
FROM node:20-slim

# 2. Set Working Directory: Create a directory inside the container to house our application code.
WORKDIR /app

# 3. Copy package.json and package-lock.json:
# Copy these files first to leverage Docker's layer caching.
# If these files don't change, Docker won't re-run 'npm install'.
COPY package*.json ./

# 4. Install Dependencies: Install the project's dependencies.
RUN npm install

# 5. Copy Application Code: Copy the rest of your application's source code into the container.
COPY . .

# 6. Build the Application: Run the build script from package.json.
RUN npm run build

# 7. Expose Port: Inform Docker that the container will listen on port 3000 at runtime.
EXPOSE 3000

# 8. Start Command: The command to run when the container starts.
CMD ["npm", "start"]
